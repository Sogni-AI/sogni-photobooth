/* 
  CRITICAL MOBILE PORTRAIT MODE FIXES
  These rules use maximum specificity to override any existing styles
*/

/* Only apply these fixes in portrait mode on iOS devices */
@media (orientation: portrait) and (-webkit-touch-callout: none) {

  
  /* ENSURE CORRECT CAMERA VIEW ASPECT RATIO */
  body #root div[class*="cameraView"],
  html body #root div[class*="cameraView"],
  body #root [class*="polaroidFrame"] div[class*="cameraView"],
  html body #root div[class*="cameraView"] {
    width: 100% !important;
    aspect-ratio: 7/9 !important; /* Force portrait aspect ratio */
    overflow: hidden !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
  }
  
  /* WEBCAM ASPECT RATIO */
  body #root #webcam,
  html body #root #webcam,
  body #root video[class*="webcam"],
  html body #root video[class*="webcam"],
  body #root [class*="cameraView"] video,
  html body #root [class*="cameraView"] video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block !important;
    aspect-ratio: 7/9 !important; /* Force portrait aspect ratio */
  }

  /* FIX FOR SAFARI BOTTOM BAR - Properly Center polaroidFrame */
  body #root [class*="cameraContainer"],
  html body #root [class*="cameraContainer"] {
    height: 100% !important;
    height: calc(var(--vh, 1vh) * 100) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    padding-bottom: env(safe-area-inset-bottom) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 10 !important;
  }

  /* Adjust polaroidFrame positioning for Safari */
  body #root [class*="polaroidFrame"],
  html body #root [class*="polaroidFrame"] {
    position: relative !important;
    transform: translateY(calc(env(safe-area-inset-bottom) / -2)) !important;
    margin: 0 auto !important;
    max-height: 85vh !important;
    max-height: calc((var(--vh, 1vh) * 85) - env(safe-area-inset-bottom)) !important;
  }

  /* Make sure shutter button is always visible */
  body #root [class*="bottomControls"],
  html body #root [class*="bottomControls"] {
    bottom: 12px !important;
    bottom: max(12px, env(safe-area-inset-bottom) - 5px) !important;
  }
} 