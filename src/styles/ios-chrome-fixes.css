/* ----------------------------------
   iOS Chrome Specific Orientation Fixes
   ---------------------------------- */

@supports (-webkit-touch-callout: none) {
  /* Target all iOS devices, regardless of screen size */
  body, html { overflow: hidden; height: 100%; }

  /* Force media query to apply on iPhone devices in portrait mode */
  @media (orientation: portrait) {
    /* Add specific style for CameraStartMenu on iOS */
    .camera-start-menu .start-menu-content {
      padding: 24px 20px !important;
      width: 95% !important;
    }

    .camera-start-menu .start-menu-title {
      font-size: 2rem !important;
      margin-bottom: 8px !important;
    }

    .camera-start-menu .start-menu-description {
      font-size: 1rem !important;
      margin-bottom: 24px !important;
    }
    
    .camera-start-menu .start-menu-options {
      flex-direction: column !important;
      align-items: center !important;
      gap: 16px !important;
    }
    
    .camera-start-menu .option-button {
      width: 100% !important;
      padding: 16px !important;
    }

    .camera-start-menu .option-button.take-photo,
    .camera-start-menu .option-button.browse-photo {
      padding: 20px !important;
    }

    .camera-start-menu .option-icon {
      font-size: 2.2rem !important;
    }

    /* Hide drag & drop option in portrait mode */
    .camera-start-menu .option-button.info-only {
      display: none !important;
    }
    
    /* Fix for the camera screen and controls */
    .photobooth-screen { 
      max-height: calc(100vh - 220px); 
      width: 95% !important;
      max-width: 95% !important;
    }
    
    /* Fix polaroid frames in photo grid to use portrait dimensions on mobile */
    .film-frame {
      aspect-ratio: calc(896 / 1152) !important; /* Portrait aspect ratio for iOS */
      padding: 8px 8px 40px 8px !important; /* Increase bottom padding */
      display: flex !important;
      flex-direction: column !important;
    }
    
    .film-frame img {
      height: calc(100% - 40px) !important; /* Reserve space for the label */
      max-height: calc(100% - 40px) !important; 
      width: 100% !important;
      object-fit: cover !important;
    }
    
    .film-frame .photo-label {
      position: absolute !important;
      bottom: 5px !important;
      left: 0 !important;
      right: 0 !important;
      text-align: center !important;
      font-size: 12px !important;
      height: 30px !important;
    }
    
    /* Fix for selected photo view in portrait */
    .film-frame.selected {
      max-width: 90vw !important;
      max-height: 80vh !important;
    }
    
    .film-frame.selected img {
      border-left: 18px solid white !important;
      border-right: 18px solid white !important;
      border-top: 18px solid white !important;
      border-bottom: 80px solid white !important;
      max-width: 95% !important;
      max-height: 80vh !important;
    }
    
    .film-frame.selected::after {
      bottom: 18px !important;
      right: 15px !important;
      font-size: 13px !important;
      padding: 6px 12px !important;
    }
    
    .film-frame.selected .photo-label {
      width: 60% !important;
      bottom: 18px !important;
      font-size: 16px !important;
    }
    
    /* Better camera polaroid frame sizing on iOS */
    .polaroidFrame {
      min-width: 0 !important;
      max-width: 95vw !important;
      margin: 0 auto !important;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
    }
    
    .cameraView {
      border-left: 24px solid white !important;
      border-right: 24px solid white !important;
      border-top: 50px solid white !important;
      border-bottom: 70px solid white !important;
      border-radius: 8px !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
    }
    
    /* Make controls more touch-friendly */
    .bottomControls {
      bottom: 15px !important;
      padding: 0 24px !important;
    }
    
    .shutterButton {
      width: 50px !important;
      height: 50px !important;
      box-shadow: 0 3px 12px rgba(0,0,0,0.2) !important;
    }
    
    .shutterDot {
      width: 24px !important;
      height: 24px !important;
    }
    
    /* Advanced settings panel improvements */
    .control-overlay {
      padding: 10px 10px 30px 10px !important;
    }
    
    .control-overlay-content {
      padding: 15px !important;
      margin-top: 25px !important;
      border-radius: 16px !important;
    }
    
    .control-option {
      padding: 15px 12px !important;
      margin-bottom: 10px !important;
    }
    
    .control-label {
      margin-bottom: 10px !important;
      font-weight: 600 !important;
    }
    
    .slider-input {
      height: 20px !important;
      margin: 8px 0 !important;
    }
    
    .slider-input::-webkit-slider-thumb {
      width: 40px !important;
      height: 40px !important;
    }
    
    /* Fix video rendering for iOS portrait */
    #webcam, #webcam.ios-fix {
      width: 100% !important;
      height: 100% !important;
      max-width: 100% !important;
      max-height: 100% !important;
      object-fit: cover !important;
    }
  }
}

/* ------------------------------
   Additional mobile viewport fix
   ------------------------------ */
:root { --vh: 1vh; }

@supports (-webkit-touch-callout: none) {
  /* Target all iOS devices, not just small screens */
  .photobooth-app {
    height: calc(var(--vh, 1vh) * 100);
    padding-bottom: env(safe-area-inset-bottom);
  }
} 