/* 
  PWA STANDALONE MODE FIXES
  These rules handle layout issues when the app is saved to home screen
  and runs in standalone/fullscreen mode
*/

/* PWA Standalone Mode - Only Control-Specific Fixes */
@media all and (display-mode: standalone) {
  /* Only fix specific controls, not entire layout */

  /* Only fix bottom controls to avoid home indicator */
  [class*="bottomControls"] {
    bottom: max(12px, env(safe-area-inset-bottom) + 4px) !important;
  }

  /* Only fix thumbnail and camera buttons */
  [class*="thumbnailButtonCorner"] {
    bottom: max(3px, env(safe-area-inset-bottom) - 8px) !important;
  }

  [class*="cameraFlipButtonWithThumbnail"] {
    bottom: max(3px, env(safe-area-inset-bottom) - 8px) !important;
  }

  /* Fix corner buttons that might get covered */
  .view-photos-btn {
    bottom: max(20px, env(safe-area-inset-bottom) + 5px) !important;
    right: max(20px, env(safe-area-inset-right) + 5px) !important;
  }

  .back-to-menu-btn {
    bottom: max(20px, env(safe-area-inset-bottom) + 5px) !important;
    left: max(20px, env(safe-area-inset-left) + 5px) !important;
  }

  /* Fix Twitter modal close button to avoid status bar/notch */
  .twitter-modal-close {
    top: max(12px, env(safe-area-inset-top) + 8px) !important;
    right: max(12px, env(safe-area-inset-right) + 8px) !important;
  }

  /* Fix other modal close buttons */
  .modal [class*="close"], .modal .close-btn, [class*="modal"] [class*="close"] {
    top: max(16px, env(safe-area-inset-top) + 8px) !important;
    right: max(16px, env(safe-area-inset-right) + 8px) !important;
  }
}

/* Minimal mobile PWA fixes - only for specific buttons */
@media all and (display-mode: standalone) and (orientation: portrait) and (max-width: 480px) {
  [class*="thumbnailButtonCorner"] {
    bottom: max(3px, env(safe-area-inset-bottom) - 8px) !important;
  }

  [class*="cameraFlipButtonWithThumbnail"] {
    bottom: max(3px, env(safe-area-inset-bottom) - 8px) !important;
  }
}
